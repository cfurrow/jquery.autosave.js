jQuery.fn.autosave=function(e){function n(e){var n=/^data\-(\w+)$/,r={};r.value=e.value;r.name=e.name;t.each(e.attributes,function(e,t){n.test(t.nodeName)&&(r[n.exec(t.nodeName)[1]]=t.value)});return r}var t=jQuery;t.each(this,function(){var r=t(this),i={data:{},event:"change",success:function(){},error:function(){},before:function(){}};e=t.extend(i,e);e.data=t.extend(e.data,n(this));console.log(e);r.bind(e.event,function(){var r=t(this);e.data.value=r.val();e.data=t.extend(e.data,n(this));var i=e.data.url?e.data.url:e.url;console.log(e);e.before&&e.before.call(this,r);t.ajax({url:i,data:e.data,success:function(t){e.success(t,r)},error:function(t){e.error(t,r)}})})})};