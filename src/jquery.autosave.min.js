jQuery.fn.autosave=function(e){function n(e){var n=/^data\-(\w+)$/;var r={};r.value=e.value;r.name=e.name;t.each(e.attributes,function(e,t){if(n.test(t.nodeName)){r[n.exec(t.nodeName)[1]]=t.value}});return r}var t=jQuery;t.each(this,function(){var r=t(this);var i={data:{},event:"change",debug:false,type:"html",success:function(){},error:function(){},before:function(){}};e=t.extend(i,e);r.data("original-value",r.val());var s=n(this);var o=s.event||e.event;var u=s.type||e.type;r.on(o,function(r){var i=t(this);s.value=i.val();s=t.extend(s,n(this));var o=s.url?s.url:e.url;if(i.val()==i.data("original-value")){r.preventDefault();return false}if(e.before){e.before.call(this,i)}if(e.debug){console.log(s);r.preventDefault();return false}t.ajax({url:o,data:s,dataType:u,success:function(t){e.success(t,i)},error:function(t){e.error(t,i)}})})})}