jQuery.fn.autosave=function(e){function n(e){var n=/data\-(.+)$/,r={};r.value=e.value;r.name=e.name;t.each(e.attributes,function(e,t){n.test(t.nodeName)&&(r[n.exec(t.nodeName)[1]]=t.value)});return r}var t=jQuery;t.each(this,function(){var r=t(this),i={data:{id:r.attr("data-id"),url:""},event:"blur",success:function(){},error:function(){}};e=t.extend(i,e);var s=n(this);e.data=t.extend(e.data,s);console.log(e);r.bind(e.event,function(){var r=t(this);e.data.value=r.val();e.data=t.extend(e.data,n(this));console.log(e);t.ajax({url:e.url,data:e.data,success:function(t){e.success(t,r)},error:function(t){e.error(t,r)}})})})};