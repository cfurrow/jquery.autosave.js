jQuery.fn.autosave=function(e){function i(e){var n=/data\-(.+)$/,r={};r.value=e.value;t.each(e.attributes,function(e,t){n.test(t.nodeName)&&(r[n.exec(t.nodeName)[1]]=t.value)});return r}var t=jQuery,n={data:{id:this.attr("data-id"),url:""},event:"blur",success:function(){},error:function(){}};e=t.extend(e,n,e.extra);var r=i(this[0]);e.data=t.extend(e.data,r);console.log(e);this.bind(e.event,function(){var n=t(this);e.data.value=n.val();e.data=t.extend(e.data,i(this));console.log(e);t.ajax({url:e.url,data:e.data,success:e.success,error:e.error})})};